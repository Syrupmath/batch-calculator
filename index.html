<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batched Cocktail App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Batched Cocktail App</h1>
    </header>
    <main>
        <section id="recipe-input">
            <h2>Enter Your Recipe</h2>
            <form>
                <label for="recipe-name">Recipe Name:</label>
                <input type="text" id="recipe-name" name="recipe-name">
                
                <div id="ingredients">
                    <div class="ingredient">
                        <label for="ingredient-name-1">Ingredient Name:</label>
                        <input type="text" id="ingredient-name-1" name="ingredient-name-1">
                        <label for="ingredient-quantity-1">Quantity:</label>
                        <input type="number" id="ingredient-quantity-1" name="ingredient-quantity-1">
                        <label for="ingredient-unit-1">Unit:</label>
                        <select id="ingredient-unit-1" name="ingredient-unit-1">
                            <option value="ounces">Ounces</option>
                            <option value="milliliters">Milliliters</option>
                        </select>
                    </div>
                </div>
                
                <button type="button" id="add-ingredient" onclick="addIngredient()">Add Ingredient</button>
            </form>
        </section>
        
        <section id="batch-size-input">
            <h2>Batch Size</h2>
            <form>
                <label for="num-servings">Number of Servings:</label>
                <input type="number" id="num-servings" name="num-servings">
                
                <label for="total-volume">Total Volume:</label>
                <input type="number" id="total-volume" name="total-volume">
                <select id="total-volume-unit" name="total-volume-unit">
                    <option value="ounces">Ounces</option>
                    <option value="milliliters">Milliliters</option>
                    <option value="liters">Liters</option>
                </select>
                
                <label for="dilution">Include Dilution:</label>
                <input type="checkbox" id="dilution" name="dilution">
                
                <button type="button" id="calculate" onclick="calculateRecipe()">Calculate</button>
            </form>
        </section>
        
        <section id="output">
            <h2>Scaled Recipe</h2>
            <div id="scaled-recipe">
                <!-- Scaled recipe will be displayed here -->
            </div>
            <button type="button" id="print-recipe" onclick="window.print()">Print Recipe</button>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Batched Cocktail App</p>
    </footer>
    <script>
        function addIngredient() {
            const ingredientsDiv = document.getElementById('ingredients');
            const ingredientCount = ingredientsDiv.children.length + 1;
            const newIngredient = document.createElement('div');
            newIngredient.classList.add('ingredient');
            newIngredient.innerHTML = `
                <label for="ingredient-name-${ingredientCount}">Ingredient Name:</label>
                <input type="text" id="ingredient-name-${ingredientCount}" name="ingredient-name-${ingredientCount}">
                <label for="ingredient-quantity-${ingredientCount}">Quantity:</label>
                <input type="number" id="ingredient-quantity-${ingredientCount}" name="ingredient-quantity-${ingredientCount}">
                <label for="ingredient-unit-${ingredientCount}">Unit:</label>
                <select id="ingredient-unit-${ingredientCount}" name="ingredient-unit-${ingredientCount}">
                    <option value="ounces">Ounces</option>
                    <option value="milliliters">Milliliters</option>
                </select>
            `;
            ingredientsDiv.appendChild(newIngredient);
        }

        function calculateRecipe() {
            const numServings = parseFloat(document.getElementById('num-servings').value) || 1;
            const totalVolume = parseFloat(document.getElementById('total-volume').value);
            const totalVolumeUnit = document.getElementById('total-volume-unit').value;
            const includeDilution = document.getElementById('dilution').checked;

            const ingredientsDiv = document.getElementById('ingredients');
            const ingredients = ingredientsDiv.getElementsByClassName('ingredient');

            let scaledRecipe = '<h3>Scaled Recipe:</h3><ul>';

            for (let i = 0; i < ingredients.length; i++) {
                const name = ingredients[i].querySelector(`[name="ingredient-name-${i + 1}"]`).value;
                const quantity = parseFloat(ingredients[i].querySelector(`[name="ingredient-quantity-${i + 1}"]`).value) || 0;
                const unit = ingredients[i].querySelector(`[name="ingredient-unit-${i + 1}"]`).value;

                let scaledQuantity = quantity * numServings;

                if (includeDilution) {
                    scaledQuantity *= 1.2; // Assuming a 20% dilution
                }

                if (totalVolume) {
                    scaledQuantity = convertUnits(scaledQuantity, unit, totalVolumeUnit);
                }

                scaledRecipe += `<li>${name}: ${scaledQuantity.toFixed(2)} ${totalVolume ? totalVolumeUnit : unit}</li>`;
            }

            scaledRecipe += '</ul>';
            document.getElementById('scaled-recipe').innerHTML = scaledRecipe;
        }

        function convertUnits(quantity, fromUnit, toUnit) {
            const conversionRates = {
                ounces: { ounces: 1, milliliters: 29.5735, liters: 0.0295735 },
                milliliters: { ounces: 0.033814, milliliters: 1, liters: 0.001 },
                liters: { ounces: 33.814, milliliters: 1000, liters: 1 }
            };
            return quantity * conversionRates[fromUnit][toUnit];
        }
    </script>
</body>
</html>
