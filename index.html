<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batched Cocktail Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .btn-block {
            display: block;
            width: 100%;
        }
        .input-group .form-floating {
            flex: 1;
        }
    </style>
</head>
<body>
    <main>
        <div class="container mt-5">
            <header class="bg-primary bg-gradient text-white text-center py-3 rounded">
                <h1>Morgenthaler Batched Cocktail Calculator</h1>
            </header>
            <form id="cocktail-form" class="needs-validation" novalidate>
                <section id="recipe-input" class="step mt-4">
                    <h2>Step 1: Enter Your Recipe</h2>
                    <p>Enter the name of your cocktail below. Then, enter your base recipe in the ingredient field, adding any additional ingredients as needed.</p>
                    <div class="mb-4">
                        <label for="recipe-name" class="form-label">Recipe Name</label>
                        <input type="text" id="recipe-name" name="recipe-name" class="form-control" placeholder="E.g., Manhattan">
                    </div>
                    
                    <div id="ingredients">
                        <div class="mb-3" id="ingredient-1">
                            <div class="input-group">
                                <input type="text" id="ingredient-name-1" name="ingredient-name-1" class="form-control ingredient-name" placeholder="Ingredient Name">
                                <input type="number" id="ingredient-quantity-1" name="ingredient-quantity-1" class="form-control ingredient-quantity" placeholder="Quantity">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="ingredient-unit-button-1">Ounces</button>
                                <ul class="dropdown-menu" aria-labelledby="ingredient-unit-button-1">
                                    <li><a class="dropdown-item" href="#" onclick="setUnit(1, 'Ounces')">Ounces</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="setUnit(1, 'Milliliters')">Milliliters</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="setUnit(1, 'Dashes')">Dashes</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="setUnit(1, 'Teaspoons')">Teaspoons</a></li>
                                </ul>
                                <input type="hidden" id="ingredient-unit-1" name="ingredient-unit-1" class="ingredient-unit" value="ounces">
                                <button type="button" class="btn btn-danger btn-sm" onclick="removeIngredient('ingredient-1')">Ã—</button>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" id="add-ingredient" class="btn btn-primary mt-3" onclick="addIngredient()">Add Ingredient</button>
                </section>

                <hr>

                <section id="batch-size-input" class="step mt-4">
                    <h2>Step 2: Determine Your Batch Size</h2>
                    <p>How big of a batch do you need? Choose a specific number of servings, or alternatively, enter the size of the container you're looking to fill.</p>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="batch-size-option" id="option-servings" onclick="toggleBatchSizeFields()">
                                <label class="form-check-label" for="option-servings">
                                    Number of Servings
                                </label>
                                <div class="form-floating mt-2">
                                    <input type="number" id="num-servings" name="num-servings" class="form-control batch-size-group" placeholder="# of Servings" disabled>
                                    <label for="num-servings">Number of Servings</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="batch-size-option" id="option-volume" onclick="toggleBatchSizeFields()">
                                <label class="form-check-label" for="option-volume">
                                    Total Volume
                                </label>
                                <div class="input-group mt-2">
                                    <div class="form-floating">
                                        <input type="number" id="total-volume" name="total-volume" class="form-control batch-size-group" placeholder="Total Volume" disabled>
                                        <label for="total-volume">Total Volume</label>
                                    </div>
                                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="total-volume-unit-button" disabled>Milliliters</button>
                                    <ul class="dropdown-menu" aria-labelledby="total-volume-unit-button">
                                        <li><a class="dropdown-item" href="#" onclick="setTotalVolumeUnit('Milliliters')">Milliliters</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setTotalVolumeUnit('Liters')">Liters</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setTotalVolumeUnit('Ounces')">Ounces</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setTotalVolumeUnit('Quarts')">Quarts</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setTotalVolumeUnit('Gallons')">Gallons</a></li>
                                    </ul>
                                    <input type="hidden" id="total-volume-unit" name="total-volume-unit" value="milliliters">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <hr>
                <section id="dilution-input" class="step mt-4">
                    <h2>Step 3: Choose Dilution</h2>
                    <p>Would you like to pre-dilute your batch? You can choose dilution for stirred cocktails (typically used for spirit-driven drinks) or shaken cocktails (typically drinks that contain juice or dairy). Alternatively, you can select zero dilution if you're going to shake or stir your drinks to order.</p>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="dilution-option" id="option-no-dilution" onclick="setDilution(0)">
                        <label class="form-check-label" for="option-no-dilution">
                            0% - No Dilution
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="dilution-option" id="option-stirred" onclick="setDilution(18)">
                        <label class="form-check-label" for="option-stirred">
                            18% - Best for Replicating the Dilution Found in Spirit-Driven Cocktails
                        </label>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="radio" name="dilution-option" id="option-shaken" onclick="setDilution(25)">
                        <label class="form-check-label" for="option-shaken">
                            25% - Best for Replicating the Dilution Found in Shaken Cocktails
                        </label>
                    </div>
                    <div class="input-group mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="dilution-option" id="option-custom" onclick="setDilutionCustom()">
                            <label class="form-check-label" for="option-custom">Custom</label>
                        </div>
                        <div class="form-floating ms-2">
                            <input type="number" id="custom-dilution" name="custom-dilution" class="form-control" placeholder="Custom Dilution (%)" disabled>
                            <label for="custom-dilution">Custom Dilution</label>
                        </div>
                    </div>
                    <input type="hidden" id="dilution" name="dilution" value="0">
                </section>

                <hr>
                
                <section id="calculate-totals" class="step mt-4">
                    <h2>Step 4: Calculate Totals</h2>
                    <p>Click "Calculate" to determine your batched cocktail recipe. Note that the batched recipe will be displayed in the same system your original recipe used.</p>
                    <button type="submit" id="calculate" class="btn btn-success">Calculate</button>
                </section>
            </form>
            
            <section id="output" style="display: none;" class="mt-4">
                <div id="recipe-name-container">
                    <h2 id="output-recipe-name"></h2>
                </div>
                <div id="original-recipe-container">
                    <h2>Original Recipe</h2>
                    <div id="original-recipe">
                        <!-- Original recipe will be displayed here -->
                    </div>
                </div>
                <div id="scaled-recipe-container">
                    <h2>Scaled Recipe</h2>
                    <div id="scaled-recipe">
                        <!-- Scaled recipe will be displayed here -->
                    </div>
                </div>
                <button type="button" id="print-recipe" class="btn btn-secondary" onclick="window.print()">Print Recipe</button>
            </section>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
